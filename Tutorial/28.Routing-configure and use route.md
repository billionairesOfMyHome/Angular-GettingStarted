# configure routes

Routing 是基于 component 的，我们需要指定要提供 routing target 的 component 集合，并为每个 component 定义路由。

Routing is component‑based, so we identify the set of components that we want to provide as routing targets and define a route for each one. 

<img src="imgs\routing6.png" style="zoom:50%;" />

## set base element

设置 routing 的第一步是在 index.html 文档的 head tag 中定义一个 base element。  base element 告诉 router 如何构造导航 URL。由于 app folder 是应用的根目录，因此将 base 的 href 设置为 /。

The first step to set up routing is to define a base element in the head tag of the index.html file.  This element tells the router how to compose the navigation URLs. Since the app folder is the application root, we'll set the href for the base tag to /. 

<img src="imgs\routing10.png" style="zoom:50%;" />

## use RouterModule

使用 routes，routing service 以及 directive（RouterLink，RouterOutlet） 需要 import 进 routing module，即 RouterModule

<img src="imgs\routing7.png" style="zoom:50%;" />

## configure route definitions list

确保路由对应用可用，需要将路由 array 传递给 RouterModule.forRoot([]) 方法，这将为应用的根目录创建路由。

Need to ensure that the routes are available to the application. We do this by passing the routes to RouterModule, call the RouterModule's forRoot method and pass our array of routes to that method. This establishes the routes for the root of our application.

<img src="imgs\routing9.png" style="zoom:50%;" />

router 必须配置 route definitions 列表。每个定义都指定一个 route 对象。每条route 都需要一条 path。path property 定义路由的 URL path segment。在大多数情况下，还需要指定了一个 component，激活 route 时显示的是此 component 的 template。

The router must be configured with a list of route definitions. Each definition specifies a route object. Each route requires a path. The path property defines the URL path segment for the route. In most cases, we also specify a component, which is the component associated with the route. It is this component's template that is displayed when the route is activated.

<img src="imgs\routing8.png" style="zoom:50%;" />

注意，path property 中没有斜杠语法，且 array 中的 routes 遵照先匹配到先赢的策略

There are no leading slashes in our path segments, and the order of the routes in this array matters. The router uses a first‑match‑wins strategy when matching the routes. This means that more specific routes should always be before less specific routes, such as the wildcard route.

## tie routes to user actions

用户可以单击菜单选项、链接、图像或按钮来激活或导航到路由。用户可以在地址栏中键入关联的 URL 段，也可以使用该 URL 的书签，或者单击浏览器的前进或后退按钮激活或导航到路由。route configuration 将处理 URL，后两种方式直接有效。我们需要定义的是激活 routers 的 user actions。

The user can click a menu option, link, image or button that activates or navigates to a route. The user can type the associated URL segment in the address bar after the application URL or use a bookmark to that URL, or the user can click the browser's forward or back buttons. The route configuration handles the URLs, so the last techniques will just work. We need to handle the first technique by tying routes to the user actions. 

<img src="imgs\routing11.png" style="zoom:50%;" />

例子

<img src="imgs\routing12.png" style="zoom:50%;" />

用 routerLink attribute directive 绑定 menu，routerLink bind 一个返回链接参数数组的模板表达式

We tie a route to each menu option using the routerLink directive, and we enclose it in square brackets. The routerLink is an attribute directive, so we add it to an element such as the anchor tag here. Recall that a directive is custom syntax that we use to power up our HTML. In this case, it's providing our anchor tag with additional functionality to navigate to a route. We bind it to a template expression that returns a link parameters array. 

<img src="imgs\routing13.png" style="zoom:50%;" />

数组的第一个参数是 route 的 path 字符串

<img src="imgs\routing14.png" style="zoom:50%;" />

数组只包含 route path 的话，可以使用简写，routerLink 不需要方括号，属性值是 path string，不是模板表达式

<img src="imgs\routing15.png" style="zoom:50%;" />

When the user selects the option, the associated route is activated. Activating a component route displays that component's view.

现在，点击 anchor element，routerLink directive 会替换 URL 中的 path segment

## place component views

使用  router‑outlet directive 告诉 Angular 在哪里放置视图显示 routed components template。

Need to tell Angular where to place our views and display the routed components template. Use the router‑outlet directive. We place that directive in the host component's template. The routed components view then appears in this location. 

<img src="imgs\routing16.png" style="zoom:50%;" />

当用户 navigates 应用时，router‑outlet directive下方的内容将替换成 routed component

As the user navigates through our application, the content below the router‑outlet is changed to display the template for the routed component. 

<img src="imgs\routing17.png" style="zoom:50%;" />

## 小结

用户进行用 routerLink directive 增强的 navigate action，routerLink 立马用 parameter array 的参数以及 index.html 中 base element 的 href  compose application URL。router 收到这个 compose URL，从 route definitions 立马找第一个匹配的 route，找到后生成 component instance，注入到 router‑outlet directive 指定的位置上

When the user navigates to a feature tied to a route with a routerLink directive, the routerLink uses the link parameters array to compose the URL segment. The browser's location URL is changed to the application URL plus the composed URL segment. The router searches through the list of valid route definitions and picks the first match. The router locates or creates an instance of the component associated with that route. The component's view is injected in the location defined by the router‑outlet directive, and the page is displayed. 

<img src="imgs\routing18.png" style="zoom:50%;" />

<img src="imgs\routing19.png" style="zoom:50%;" />

<img src="imgs\routing20.png" style="zoom:50%;" />

<img src="imgs\routing21.png" style="zoom:50%;" />

<img src="imgs\routing22.png" style="zoom:50%;" />

<img src="imgs\routing23.png" style="zoom:50%;" />

<img src="imgs\routing24.png" style="zoom:50%;" />

<img src="imgs\routing25.png" style="zoom:50%;" /> 
